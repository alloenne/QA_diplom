# План автоматизации

### Валидные значения
* Поле "Номер карты": 16 арабских цифр без пробелов.
* Поле "Месяц": две арабские цифры от 01 до 12 включительно, если в поле "Год" указан текущий год, то порядковый номер месяцы не ранее текущего.
* Поле "Год": арабские цифры, последние две цифры года, не ранее текущего.
* Поле "Владелец": латинские буквы, не менее двух символов.
* Поле "CVC/CVV": три арабские цифры.

### Невалидные значения
* Поле "Номер карты": буквы любого алфавита, спецсимволы, пробелы, большее или меньшее количество цифр, пустое поле.
* Поле "Месяц": буквы, спецсимволы, значения меньше 00 или больше 12, значение меньше текущего номера месяца, если в поле "Год" указан текущий год, большее или меньшее количество цифр, пустое поле.
* Поле "Год": буквы любого алфавита, спецсимволы, пробелы, год ранее текущего, большее или меньшее количество цифр, пустое поле.
* Поле "Владелец": буквы любого алфавита кроме латинского, менее двух букв, цифры, спецсимволы, пробелы, пустое поле.
* Поле "CVC/CVV": буквы любого алфавита, спецсимволы, пробелы, большее или меньшее количество цифр, пустое поле.

### Тестовые значения

**Сценарий 1**
* Поле "Номер карты": 4444 4444 4444 4441 (статус APPROVED).
* Поле "Месяц": 12.
* Поле "Год": 23.
* Поле "Владелец": IVANOV IVAN.
* Поле "CVC/CVV": 999.

**Сценарий 2**
* Поле "Номер карты": 4444 4444 4444 4442 (статус DECLINED).
* Поле "Месяц": 12.
* Поле "Год": 23.
* Поле "Владелец": IVANOV IVAN.
* Поле "CVC/CVV": 999.

**Сценарий 3**
Любые невалидные данные.

## Перечень автоматизируемых сценариев

### Позитивные сценарии:

**1. Покупка тура с валидной карты.**
Шаги:
* Открыть страницу покупки тура, нажать кнопку "Купить".
* Ввести валидные данные из Сценария 1.
* Нажать "Продолжить".
_Ожидаемый результат:_ операция проведена успешно, появляется сообщение "Успешно. Операция одобрена Банком", появляется запись об операции в БД.

**2. Покупка тура с валидной карты в кредит.**
   Шаги:
* Открыть страницу покупки тура, нажать кнопку "Купить в кредит".
* Ввести валидные данные из Сценария 1.
* Нажать "Продолжить".
_Ожидаемый результат:_ операция проведена успешно, появляется сообщение "Операция одобрена Банком", появляется запись об операции в БД.

**3. Покупка тура с невалидной карты.**
   Шаги:
* Открыть страницу покупки тура, нажать кнопку "Купить".
* Ввести валидные данные из Сценария 2.
* Нажать "Продолжить".
_Ожидаемый результат:_ операция не проведена, появляется сообщение "Ошибка! Банк отказал в проведении операции", запись в БД не появляется.

**4. Покупка тура с невалидной карты в карты.**
Шаги:
* Открыть страницу покупки тура, нажать кнопку "Купить в кредит".
* Ввести валидные данные из Сценария 2.
* Нажать "Продолжить".
_Ожидаемый результат:_ операция не проведена, появляется сообщение "Ошибка! Банк отказал в проведении операции", запись в БД не появляется.

### Негативные сценарии:

Для данных сценариев для одного поля применяются невалидные значения, для остальных полей - значения из сценария 1 (например, если проверяется невалидный номер карты, то в полях "Месяц", "Год", "Владелец" и "CVC/CVV" введены валидные значения из сценария 1).

Проверяемые поля и ожидаемые результаты для каждого варианта невалидного значения указаны в таблице ниже.
**В каждом ожидаемом результате также не производится операция, и не появляется запись о ней в БД.**

| **Номер** |   **Поле**  | **Вводимые данные**                                                                 | **Ожидаемый результат при попытке   отправить форму**                                                                                                                                  |
|:---------:|:-----------:|:------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|     1     | Номер карты | Пустое поле                                                                         | Сообщение "Неверный   формат" или "Поле обязательно для заполнения"                                                                                                                    |
|     2     | Номер карты | Одна цифра                                                                          | Сообщение "Неверный   формат"                                                                                                                                                          |
|     3     | Номер карты | Пятнадцать цифр                                                                     | Сообщение "Неверный   формат"                                                                                                                                                          |
|     4     | Номер карты | Случайный номер карты, не   совпадающий с зарегистрированными (0000 0000 0000 0000) | Операция не проведена, появляется сообщение   "Ошибка! Банк отказал в проведении операции", запись в БД не   появляется.                                                               |
|     5     | Номер карты | Больше 16 цифр                                                                      | Не вводится более 16 цифр, при   нажатии кнопки "Продолжить" операция не проведена, появляется   сообщение "Ошибка! Банк отказал в проведении операции", запись в БД   не появляется.  |
|     6     | Номер карты | Пробел                                                                              | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     7     | Номер карты | Буквы любого алфавита                                                               | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     8     | Номер карты | Спецсимволы                                                                         | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     9     | Месяц       | Пустое поле                                                                         | Сообщение "Неверный   формат"                                                                                                                                                          |
|     10    | Месяц       | Пробел                                                                              | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     11    | Месяц       | Буквы любого алфавита                                                               | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     12    | Месяц       | Спецсимволы                                                                         | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     13    | Месяц       | Одна цифра                                                                          | Сообщение "Неверный   формат"                                                                                                                                                          |
|     14    | Месяц       | Две цифры, 13                                                                       | Сообщение "Неверно указан   срок действия карты"                                                                                                                                       |
|     15    | Месяц       | Месяц меньше текущего, 04, в   поле "Год" указан текущий год                        | Сообщение "Истёк срок   действия карты"                                                                                                                                                |
|     16    | Месяц       | Две цифры, 00                                                                       | Сообщение "Неверно указан   срок действия карты"                                                                                                                                       |
|     17    | Месяц       | Три цифры, первые две не   являются валидным номером месяца, 333                    | Не вводится более двух цифр,   сообщение "Неверно указан срок действия карты"                                                                                                          |
|     18    | Год         | Пустое поле                                                                         | Сообщение "Неверный   формат"                                                                                                                                                          |
|     19    | Год         | Пробел                                                                              | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     20    | Год         | Буквы любого алфавита                                                               | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     21    | Год         | Спецсимволы                                                                         | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     22    | Год         | Одна цифра                                                                          | Сообщение "Неверный   формат"                                                                                                                                                          |
|     23    | Год         | Год меньше текущего, 22                                                             | Сообщение "Истёк срок   действия карты"                                                                                                                                                |
|     24    | Год         | Год превышающий номер текущего   на 6 и более, 29                                   | Сообщение "Неверно указан   срок действия карты"                                                                                                                                       |
|     25    | Год         | Три цифры, первые две не   являются валидным значением года, 333                    | Не вводится более двух цифр,   сообщение "Неверно указан срок действия карты"                                                                                                          |
|     26    | Владелец    | Пустое поле                                                                         | Сообщение "Поле обязательно   для заполнения"                                                                                                                                          |
|     27    | Владелец    | Спецсимволы                                                                         | Сообщение "Неверный   формат"                                                                                                                                                          |
|     28    | Владелец    | Пробелы                                                                             | Сообщение "Поле обязательно   для заполнения"                                                                                                                                          |
|     29    | Владелец    | Цифры                                                                               | Сообщение "Неверный   формат"                                                                                                                                                          |
|     30    | Владелец    | Буквы любого алфавита, кроме   латинского                                           | Сообщение "Неверный   формат"                                                                                                                                                          |
|     31    | Владелец    | Одна буква латинского алфавита                                                      | Сообщение "Неверный   формат"                                                                                                                                                          |
|     32    | CVC/CVV     | Пустое поле                                                                         | Сообщение "Неверный   формат"                                                                                                                                                          |
|     33    | CVC/CVV     | Пробел                                                                              | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     34    | CVC/CVV     | Буквы любого алфавита                                                               | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     35    | CVC/CVV     | Спецсимволы                                                                         | Данные не вводятся, сообщение   под полем "Неверный формат"                                                                                                                            |
|     36    | CVC/CVV     | Одна цифра                                                                          | Сообщение "Неверный   формат"                                                                                                                                                          |
|     37    | CVC/CVV     | Четыре цифры, первые три не   совпадают с данными из сценария 1, 3333               | Не вводится более трех цифр, при  нажатии кнопки "Продолжить" операция не проведена, появляется   сообщение "Ошибка! Банк отказал в проведении операции", запись в БД   не появляется. |


**Данные проверки необходимо провести и для кнопки "Купить" и для кнопки "Купить в кредит".**

## Перечень используемых инструментов 

1. Язык написания тестов - Java, включая следующие библиотеки:
* Faker для генерирования случайных пользователей
* Selenide для тестирования веб-интерфейсов
* REST Assured для тестирования отправки email
* Lombok для уменьшения количества шаблонного кода.
2. Среда разработки - IntelliJ IDEA 2022.3 (Community Edition)
3. Docker Compose для запуска контейнера с базой данных
4. Клиент для работы с БД - DBeaver
5. Allure для формирования отчета об ошибках

## Перечень и описание возможных рисков при автоматизации

* Проблемы с подключением и настройкой тестируемого окружения и БД
* Отсутствие документации на тестируемый сервис
* Из-за изменения дизайна страницы тесты могут потерять акутальность.
* Из-за большого количества тестов их сложнее поддерживать в актуальном состоянии.
* Действия симулятора не соответствуют работе реальных приложений.

## Интервальная оценка с учётом рисков в часах

Планирование - 5 часов.
Написание и прогон автоматизированных тестов - 35 часов.
Заведение баг-репортов - от 2 до 10 часов (в зависимости от количества багов)
Подготовка отчетных документов - 5 часов.

## План сдачи работ

Написание и прогон автотестов - до 15.05.23
Заведение баг-репортов - до 18.05.23
Составление отчетной документации - до 20.05.23